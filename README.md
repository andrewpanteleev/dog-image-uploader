# dog-image-uploader

## Результаты Pylint

(.venv) C:\Users\a.panteleev\Documents\GitHub\dog-image-uploader>pylint test_dogs.py

Your code has been rated at 10.00/10 (previous run: 9.88/10, +0.12)

---

1. Отсутствие обработки ошибок при HTTP-запросах (Критичность: Высокая)

	•	Проблема: В исходном коде запросы с помощью библиотеки requests не защищены блоками обработки ошибок. В случае сбоев сети или ошибок API программа завершится с исключением.
	•	Исправление: Добавлены блоки try/except в методы, где выполняются HTTP-запросы (create_folder, upload_photos_to_yd, get_sub_breeds, и get_urls). Теперь ошибки обрабатываются, и логируются сообщения об ошибках.

2. Хранение токена в коде (Критичность: Высокая)

	•	Проблема: OAuth-токен был захардкожен прямо в коде, что представляет риск безопасности при публикации кода в публичные репозитории.
	•	Исправление: Токен теперь загружается из переменной окружения с помощью os.getenv('YANDEX_DISK_TOKEN'), что делает код безопаснее и гибче.

3. Неявное извлечение имени файла из URL (Критичность: Средняя)

	•	Проблема: В исходном коде использовался split('/') для извлечения имени файла из URL, что может привести к ошибкам, если структура URL изменится.
	•	Исправление: Было предложено использовать urllib.parse.urlsplit, но в финальной версии мы вернулись к использованию split('/') с более явным и надежным контролем структуры URL. Теперь имя файла собирается с учетом породы и подпороды.

4. Отсутствие возврата значений из методов YaUploader (Критичность: Средняя)

	•	Проблема: Методы create_folder и upload_photos_to_yd не возвращали результат выполнения, что не позволяло проверить успешность операций.
	•	Исправление: Методы теперь возвращают True при успешном выполнении и False при ошибках, что позволяет лучше контролировать выполнение программы.

5. Неоптимальные и избыточные HTTP-запросы (Критичность: Средняя)

	•	Проблема: В функции get_urls избыточно выполняется несколько запросов для получения изображений для каждой подпороды.
	•	Исправление: Удален дублирующий запрос, и теперь для каждой подпороды делается только один запрос на получение изображения.

6. Случайный выбор породы в тестах (Критичность: Средняя)

	•	Проблема: В исходных тестах для проверки использовалась случайная порода через random.choice, что делало тесты нестабильными и непредсказуемыми.
	•	Исправление: Убрали случайный выбор породы, и тесты теперь последовательно проверяют фиксированные породы (doberman, bulldog, collie), что делает тесты предсказуемыми и воспроизводимыми.

7. Неверная проверка в тестах загрузки файлов (Критичность: Средняя)

	•	Проблема: В тестах отсутствовала полная проверка успешности загрузки всех файлов. Проверялось только количество файлов и папок без учета реальной успешности загрузки.
	•	Исправление: Исправлены тесты для проверки содержимого папки на Яндекс.Диске. Добавлена проверка успешности загрузки всех файлов.

8. Пустой конструктор в классе YaUploader (Критичность: Низкая)

	•	Проблема: В исходном коде конструктор __init__ класса YaUploader был пустым и не использовался по назначению.
	•	Исправление: В финальном коде конструктор инициализирует токен и заголовки, необходимые для выполнения запросов, что делает класс более функциональным и удобным в использовании.

9. Дублирование токена при вызовах методов (Критичность: Низкая)

	•	Проблема: В исходном коде при каждом вызове методов create_folder и upload_photos_to_yd передавался токен как аргумент, что приводило к дублированию.
	•	Исправление: Токен теперь инициализируется в конструкторе класса YaUploader и используется в атрибутах, что устраняет необходимость передавать его повторно.

10. Отсутствие логирования (Критичность: Низкая)

	•	Проблема: В исходном коде отсутствовало логирование ключевых операций, таких как создание папки или загрузка файлов на Яндекс.Диск.
	•	Исправление: Логирование было добавлено на всех ключевых этапах программы (создание папки, загрузка файлов, обработка ошибок), что помогает лучше отслеживать выполнение программы и упрощает отладку.